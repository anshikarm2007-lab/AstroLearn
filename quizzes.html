<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice Quizzes - AstroLearn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-[#0B0F2F] via-[#482880] to-[#0B0F2F] min-h-screen text-[#F5F7FA] overflow-x-hidden">
    <!-- Floating Stars Background -->
    <div id="floatingStars"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <img src="sticker.webp" alt="AstroLearn Logo" class="h-8 w-8 object-contain">
                <a href="index.html" class="text-2xl font-bold bg-gradient-to-r from-[#4FC3F7] to-[#FF6EC7] bg-clip-text text-transparent">
                    AstroLearn
                </a>
            </div>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link protected-link">Dashboard</a>
                <a href="schedule.html" class="nav-link protected-link">Schedule</a>
                <a href="resources.html" class="nav-link protected-link">Resources</a>
                <a href="login.html" class="btn-secondary py-2 px-4 text-sm" id="authBtn">Sign In</a>
            </div>
            <button class="md:hidden text-2xl" id="mobileMenuBtn">‚ò∞</button>
        </div>
        <div class="md:hidden hidden" id="mobileMenu">
            <div class="flex flex-col space-y-2 p-4">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link protected-link">Dashboard</a>
                <a href="schedule.html" class="nav-link protected-link">Schedule</a>
                <a href="resources.html" class="nav-link protected-link">Resources</a>
                <a href="login.html" class="btn-secondary py-2 px-4 text-center" id="authBtnMobile">Sign In</a>
            </div>
        </div>
    </nav>

    <!-- Quizzes Header -->
    <section class="container mx-auto px-6 py-12">
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">üìù</div>
            <h1 class="text-5xl md:text-7xl font-bold mb-4">
                <span class="bg-gradient-to-r from-[#4FC3F7] to-[#FF6EC7] bg-clip-text text-transparent">
                    Practice Quizzes
                </span>
            </h1>
            <p class="text-xl text-[#F5F7FA]/80">Test your knowledge based on completed lessons</p>
        </div>

        <!-- Subject Selection -->
        <div class="glass-card p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-center">Select Subject</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="subjectSelector">
                <!-- Subjects will be populated by JS -->
            </div>
        </div>

        <!-- Available Quizzes -->
        <div id="quizzesContainer" class="hidden">
            <div class="glass-card p-6 mb-6">
                <h2 class="text-2xl font-bold mb-4" id="currentSubjectTitle">Select a subject to view available quizzes</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="quizzesGrid">
                    <!-- Quizzes will be populated by JS -->
                </div>
            </div>
        </div>

        <!-- Quiz Taking Interface -->
        <div id="quizInterface" class="hidden">
            <div class="glass-card p-8 mb-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold" id="quizTitle">Quiz</h2>
                    <div class="flex items-center gap-4">
                        <div class="text-sm text-[#F5F7FA]/70">
                            Question <span id="currentQuestion">1</span> / <span id="totalQuestions">0</span>
                        </div>
                        <div class="glass-card px-4 py-2 text-sm font-bold border border-[#4FC3F7]/30" id="timerDisplay">
                            <span id="timerText">15:00</span>
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <div class="progress-bar-container mb-2" style="height: 8px;">
                        <div class="progress-bar" id="quizProgressBar" style="width: 0%;"></div>
                    </div>
                </div>

                <div class="quiz-question glass-card p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4" id="questionText">Question</h3>
                    <div class="space-y-3" id="answerOptions">
                        <!-- Answer options will be populated by JS -->
                    </div>
                </div>

                <div class="flex justify-between">
                    <button class="btn-secondary" id="prevQuestionBtn" disabled>‚Üê Previous</button>
                    <button class="btn-primary" id="nextQuestionBtn">Next ‚Üí</button>
                    <button class="btn-primary hidden" id="submitQuizBtn">Submit Quiz</button>
                </div>
            </div>
        </div>

        <!-- Quiz Results -->
        <div id="quizResults" class="hidden">
            <div class="glass-card p-8 text-center">
                <div class="text-6xl mb-4" id="resultIcon">üéâ</div>
                <h2 class="text-3xl font-bold mb-4" id="resultTitle">Quiz Complete!</h2>
                <div class="text-5xl font-bold mb-4" id="resultScore">0%</div>
                <p class="text-lg text-[#F5F7FA]/70 mb-6" id="resultMessage">Great job!</p>
                <div class="flex gap-4 justify-center">
                    <button class="btn-primary" id="takeAnotherQuizBtn">Take Another Quiz</button>
                    <a href="dashboard.html" class="btn-secondary">Back to Dashboard</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container mx-auto px-6 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm text-[#F5F7FA]/70 flex items-center gap-1">Powered by AstroLearn <img src="sticker.webp" alt="AstroLearn Logo" class="h-4 w-4 object-contain inline"></p>
                </div>
                <div class="flex space-x-6">
                    <a href="about.html" class="footer-link">About</a>
                    <a href="contact.html" class="footer-link">Contact</a>
                    <a href="privacy.html" class="footer-link">Privacy</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Check authentication
        document.addEventListener('DOMContentLoaded', () => {
            if (!checkAuth()) {
                return;
            }
            updateNavigation();
            initFloatingStars();
            setupMobileMenu();
            loadSubjects();
        });

        function setupMobileMenu() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        }

        function getGradeLevel() {
            const prefs = localStorage.getItem('astrolearn_preferences');
            if (prefs) {
                try {
                    const preferences = JSON.parse(prefs);
                    return preferences.grade || 9;
                } catch (e) {
                    console.error('Error parsing preferences:', e);
                }
            }
            return 9;
        }

        function getSelectedSubjects() {
            const prefs = localStorage.getItem('astrolearn_preferences');
            if (prefs) {
                try {
                    const preferences = JSON.parse(prefs);
                    return preferences.subjects || ['math', 'science', 'reading', 'language'];
                } catch (e) {
                    console.error('Error parsing preferences:', e);
                }
            }
            return ['math', 'science', 'reading', 'language'];
        }

        function getCompletedLessons() {
            const completed = localStorage.getItem('astrolearn_completed_lessons');
            if (completed) {
                try {
                    return JSON.parse(completed);
                } catch (e) {
                    console.error('Error parsing completed lessons:', e);
                }
            }
            return [];
        }

        const subjects = [
            { id: 'math', name: 'Math', icon: 'üî≠', color: '#4FC3F7' },
            { id: 'science', name: 'Science', icon: 'üß¨', color: '#FF6EC7' },
            { id: 'reading', name: 'Reading', icon: 'üìö', color: '#482880' },
            { id: 'language', name: 'Language', icon: 'üåç', color: '#4FC3F7' }
        ];

        // Quiz questions for each subject - 6 quizzes per subject, 10 questions each
        const subjectQuizzes = {
            math: {
                "Algebra Basics": [
                    { question: "What is 2x + 5 = 13? Solve for x.", options: ["x = 4", "x = 5", "x = 6", "x = 7"], correct: 0 },
                    { question: "What is the value of x in 3x - 7 = 14?", options: ["x = 5", "x = 6", "x = 7", "x = 8"], correct: 2 },
                    { question: "Simplify: 2x + 3x", options: ["5x", "6x", "5x¬≤", "6x¬≤"], correct: 0 },
                    { question: "What is the value of x in 4x + 8 = 20?", options: ["x = 3", "x = 4", "x = 5", "x = 6"], correct: 0 },
                    { question: "Solve for x: 5x - 3 = 12", options: ["x = 2", "x = 3", "x = 4", "x = 5"], correct: 1 },
                    { question: "What is 3(x + 4) when expanded?", options: ["3x + 4", "3x + 12", "x + 12", "3x + 7"], correct: 1 },
                    { question: "What is the coefficient of x in 7x + 2?", options: ["7", "2", "x", "9"], correct: 0 },
                    { question: "Solve for x: x/3 = 4", options: ["x = 7", "x = 12", "x = 1", "x = 9"], correct: 1 },
                    { question: "What is 2x - x?", options: ["x", "2x", "x¬≤", "0"], correct: 0 },
                    { question: "If x = 5, what is 3x + 2?", options: ["15", "17", "20", "22"], correct: 1 }
                ],
                "Geometry": [
                    { question: "What is the area of a rectangle with length 8 and width 5?", options: ["13", "26", "40", "45"], correct: 2 },
                    { question: "What is the perimeter of a square with side length 6?", options: ["12", "24", "36", "18"], correct: 1 },
                    { question: "What is the area of a circle with radius 5? (Use œÄ = 3.14)", options: ["15.7", "31.4", "78.5", "157"], correct: 2 },
                    { question: "How many degrees are in a triangle?", options: ["90", "180", "270", "360"], correct: 1 },
                    { question: "What is the area of a triangle with base 10 and height 6?", options: ["16", "30", "60", "32"], correct: 1 },
                    { question: "What is the perimeter of a rectangle with length 10 and width 4?", options: ["14", "28", "40", "44"], correct: 1 },
                    { question: "How many sides does a hexagon have?", options: ["4", "5", "6", "7"], correct: 2 },
                    { question: "What is the volume of a cube with side length 3?", options: ["9", "18", "27", "36"], correct: 2 },
                    { question: "What is the circumference of a circle with radius 4? (Use œÄ = 3.14)", options: ["12.56", "25.12", "50.24", "100.48"], correct: 1 },
                    { question: "What is the area of a square with side length 7?", options: ["14", "28", "49", "56"], correct: 2 }
                ],
                "Fractions & Decimals": [
                    { question: "What is 1/2 + 1/4?", options: ["2/4", "3/4", "1/6", "2/6"], correct: 1 },
                    { question: "What is 3/4 expressed as a decimal?", options: ["0.25", "0.5", "0.75", "0.8"], correct: 2 },
                    { question: "What is 0.5 as a fraction?", options: ["1/4", "1/2", "1/3", "2/3"], correct: 1 },
                    { question: "What is 2/3 + 1/6?", options: ["3/6", "4/6", "5/6", "6/6"], correct: 2 },
                    { question: "What is 0.25 as a fraction?", options: ["1/2", "1/3", "1/4", "1/5"], correct: 2 },
                    { question: "What is 1/3 √ó 3/4?", options: ["1/4", "3/7", "4/7", "3/12"], correct: 0 },
                    { question: "What is 0.8 as a fraction?", options: ["4/5", "3/4", "2/3", "5/6"], correct: 0 },
                    { question: "What is 1/2 - 1/4?", options: ["0", "1/4", "1/2", "3/4"], correct: 1 },
                    { question: "What is 2.5 + 3.7?", options: ["5.2", "6.2", "5.12", "6.12"], correct: 1 },
                    { question: "What is 0.75 √ó 4?", options: ["3", "2.75", "3.5", "4"], correct: 0 }
                ],
                "Percentages": [
                    { question: "What is 15% of 200?", options: ["15", "30", "25", "20"], correct: 1 },
                    { question: "What is 25% of 80?", options: ["15", "20", "25", "30"], correct: 1 },
                    { question: "What is 50% of 120?", options: ["50", "60", "70", "80"], correct: 1 },
                    { question: "If 20 out of 100 students passed, what percentage passed?", options: ["10%", "20%", "30%", "40%"], correct: 1 },
                    { question: "What is 10% of 50?", options: ["5", "10", "15", "20"], correct: 0 },
                    { question: "What is 75% of 40?", options: ["25", "30", "35", "40"], correct: 1 },
                    { question: "If a shirt costs $40 and is 20% off, what is the discount?", options: ["$4", "$8", "$12", "$16"], correct: 1 },
                    { question: "What is 1% of 500?", options: ["1", "5", "10", "50"], correct: 1 },
                    { question: "What is 33% of 90? (Round to nearest whole number)", options: ["27", "30", "33", "36"], correct: 1 },
                    { question: "What percentage is 3 out of 12?", options: ["20%", "25%", "30%", "35%"], correct: 1 }
                ],
                "Word Problems": [
                    { question: "If John has 15 apples and gives away 6, how many does he have left?", options: ["8", "9", "10", "11"], correct: 1 },
                    { question: "A train travels 60 miles per hour. How far will it travel in 3 hours?", options: ["120 miles", "180 miles", "200 miles", "240 miles"], correct: 1 },
                    { question: "If a pizza is cut into 8 slices and 3 are eaten, what fraction remains?", options: ["3/8", "5/8", "1/2", "3/4"], correct: 1 },
                    { question: "Sarah has $50 and spends $32. How much does she have left?", options: ["$16", "$18", "$20", "$22"], correct: 1 },
                    { question: "If 4 books cost $20, how much does 1 book cost?", options: ["$4", "$5", "$6", "$8"], correct: 1 },
                    { question: "A rectangle has length 12 and width 8. What is its area?", options: ["20", "40", "96", "100"], correct: 2 },
                    { question: "If you read 30 pages per day, how many pages in 5 days?", options: ["120", "150", "180", "200"], correct: 1 },
                    { question: "Tom is 3 times older than his sister who is 5. How old is Tom?", options: ["12", "15", "18", "20"], correct: 1 },
                    { question: "If 6 students share 24 pencils equally, how many does each get?", options: ["3", "4", "5", "6"], correct: 1 },
                    { question: "A car uses 5 gallons of gas to travel 100 miles. How many gallons for 200 miles?", options: ["8", "10", "12", "15"], correct: 1 }
                ],
                "Advanced Math": [
                    { question: "What is the value of 3¬≤ + 4¬≤?", options: ["25", "7", "12", "49"], correct: 0 },
                    { question: "What is the square root of 64?", options: ["6", "7", "8", "9"], correct: 2 },
                    { question: "What is 5 √ó 8 - 3 √ó 4?", options: ["28", "32", "36", "40"], correct: 0 },
                    { question: "What is the greatest common factor of 12 and 18?", options: ["3", "4", "6", "9"], correct: 2 },
                    { question: "What is 2¬≥?", options: ["4", "6", "8", "10"], correct: 2 },
                    { question: "What is the least common multiple of 4 and 6?", options: ["10", "12", "18", "24"], correct: 1 },
                    { question: "What is ‚àö36?", options: ["4", "5", "6", "7"], correct: 2 },
                    { question: "What is 10¬≤ - 5¬≤?", options: ["50", "75", "100", "125"], correct: 1 },
                    { question: "What is the value of 4! (4 factorial)?", options: ["12", "16", "24", "32"], correct: 2 },
                    { question: "What is 2‚Å¥?", options: ["8", "12", "16", "20"], correct: 2 }
                ]
            },
            science: {
                "Biology": [
                    { question: "What is the powerhouse of the cell?", options: ["Nucleus", "Mitochondria", "Ribosome", "Cell membrane"], correct: 1 },
                    { question: "What process do plants use to make food?", options: ["Respiration", "Photosynthesis", "Digestion", "Circulation"], correct: 1 },
                    { question: "Where is DNA located in a cell?", options: ["Mitochondria", "Nucleus", "Cytoplasm", "Cell membrane"], correct: 1 },
                    { question: "What is the basic unit of life?", options: ["Atom", "Cell", "Molecule", "Organ"], correct: 1 },
                    { question: "What gas do plants release during photosynthesis?", options: ["Carbon Dioxide", "Oxygen", "Nitrogen", "Hydrogen"], correct: 1 },
                    { question: "What is the process by which cells divide?", options: ["Photosynthesis", "Mitosis", "Respiration", "Digestion"], correct: 1 },
                    { question: "What is the largest organ in the human body?", options: ["Heart", "Liver", "Skin", "Lungs"], correct: 2 },
                    { question: "What type of blood cells fight infection?", options: ["Red blood cells", "White blood cells", "Platelets", "Plasma"], correct: 1 },
                    { question: "What is the study of living things called?", options: ["Chemistry", "Physics", "Biology", "Geology"], correct: 2 },
                    { question: "What is the main function of the heart?", options: ["To digest food", "To pump blood", "To filter waste", "To produce hormones"], correct: 1 }
                ],
                "Chemistry": [
                    { question: "What are the three states of matter?", options: ["Solid, Liquid, Gas", "Hot, Cold, Warm", "Big, Medium, Small", "Hard, Soft, Medium"], correct: 0 },
                    { question: "What is the chemical symbol for water?", options: ["H2O", "CO2", "O2", "NaCl"], correct: 0 },
                    { question: "What is the smallest unit of matter?", options: ["Molecule", "Atom", "Cell", "Electron"], correct: 1 },
                    { question: "What is the chemical symbol for oxygen?", options: ["O", "Ox", "O2", "Og"], correct: 0 },
                    { question: "What happens when water freezes?", options: ["It becomes a gas", "It becomes a solid", "It disappears", "It becomes a liquid"], correct: 1 },
                    { question: "What is the pH of pure water?", options: ["5", "6", "7", "8"], correct: 2 },
                    { question: "What is the chemical symbol for carbon?", options: ["Ca", "C", "Co", "Cr"], correct: 1 },
                    { question: "What is a mixture where one substance dissolves in another?", options: ["Compound", "Solution", "Element", "Molecule"], correct: 1 },
                    { question: "What is the process of a liquid turning into a gas?", options: ["Freezing", "Melting", "Evaporation", "Condensation"], correct: 2 },
                    { question: "What is the most abundant gas in Earth's atmosphere?", options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Argon"], correct: 1 }
                ],
                "Physics": [
                    { question: "What is the speed of light in a vacuum?", options: ["300,000 km/s", "150,000 km/s", "450,000 km/s", "600,000 km/s"], correct: 0 },
                    { question: "What force keeps planets in orbit around the Sun?", options: ["Magnetism", "Gravity", "Electricity", "Friction"], correct: 1 },
                    { question: "What is the unit of force?", options: ["Joule", "Watt", "Newton", "Pascal"], correct: 2 },
                    { question: "What is energy in motion called?", options: ["Potential energy", "Kinetic energy", "Thermal energy", "Chemical energy"], correct: 1 },
                    { question: "What is the formula for speed?", options: ["Distance √ó Time", "Distance √∑ Time", "Time √∑ Distance", "Distance + Time"], correct: 1 },
                    { question: "What happens to an object's mass in space?", options: ["It increases", "It decreases", "It stays the same", "It disappears"], correct: 2 },
                    { question: "What is the unit of electrical current?", options: ["Volt", "Ampere", "Ohm", "Watt"], correct: 1 },
                    { question: "What type of energy does a moving car have?", options: ["Potential", "Kinetic", "Chemical", "Nuclear"], correct: 1 },
                    { question: "What is the rate of change of velocity called?", options: ["Speed", "Distance", "Acceleration", "Momentum"], correct: 2 },
                    { question: "What is the force that opposes motion?", options: ["Gravity", "Magnetism", "Friction", "Electricity"], correct: 2 }
                ],
                "Earth Science": [
                    { question: "What is the main component of Earth's atmosphere?", options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Ozone"], correct: 1 },
                    { question: "What is the outermost layer of Earth?", options: ["Mantle", "Core", "Crust", "Atmosphere"], correct: 2 },
                    { question: "What causes earthquakes?", options: ["Wind", "Water", "Movement of tectonic plates", "Volcanoes"], correct: 2 },
                    { question: "What is the process of rocks breaking down called?", options: ["Erosion", "Weathering", "Deposition", "Sedimentation"], correct: 1 },
                    { question: "What is the water cycle process where water vapor becomes liquid?", options: ["Evaporation", "Condensation", "Precipitation", "Transpiration"], correct: 1 },
                    { question: "What is the hardest mineral?", options: ["Gold", "Diamond", "Quartz", "Iron"], correct: 1 },
                    { question: "What type of rock is formed from cooled lava?", options: ["Sedimentary", "Metamorphic", "Igneous", "Limestone"], correct: 2 },
                    { question: "What is the largest ocean on Earth?", options: ["Atlantic", "Indian", "Arctic", "Pacific"], correct: 3 },
                    { question: "What layer of the atmosphere contains the ozone layer?", options: ["Troposphere", "Stratosphere", "Mesosphere", "Thermosphere"], correct: 1 },
                    { question: "What is the center of Earth called?", options: ["Mantle", "Crust", "Core", "Lithosphere"], correct: 2 }
                ],
                "Astronomy": [
                    { question: "What planet is closest to the Sun?", options: ["Venus", "Mercury", "Earth", "Mars"], correct: 1 },
                    { question: "What is the largest planet in our solar system?", options: ["Saturn", "Jupiter", "Neptune", "Uranus"], correct: 1 },
                    { question: "What is Earth's natural satellite?", options: ["Mars", "Venus", "The Moon", "Jupiter"], correct: 2 },
                    { question: "What is a shooting star actually?", options: ["A star", "A planet", "A meteor", "A comet"], correct: 2 },
                    { question: "How many planets are in our solar system?", options: ["7", "8", "9", "10"], correct: 1 },
                    { question: "What is the name of our galaxy?", options: ["Andromeda", "Milky Way", "Orion", "Big Dipper"], correct: 1 },
                    { question: "What is the hottest planet in our solar system?", options: ["Mercury", "Venus", "Earth", "Mars"], correct: 1 },
                    { question: "What causes day and night on Earth?", options: ["Earth's orbit", "Earth's rotation", "The Moon", "The Sun's movement"], correct: 1 },
                    { question: "What is a group of stars that form a pattern called?", options: ["Galaxy", "Solar system", "Constellation", "Nebula"], correct: 2 },
                    { question: "What is the closest star to Earth?", options: ["Alpha Centauri", "The Sun", "Sirius", "Betelgeuse"], correct: 1 }
                ],
                "General Science": [
                    { question: "What gas do plants absorb from the atmosphere?", options: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Hydrogen"], correct: 1 },
                    { question: "What is the study of weather called?", options: ["Geology", "Meteorology", "Biology", "Astronomy"], correct: 1 },
                    { question: "What is the process of a solid turning into a liquid?", options: ["Freezing", "Melting", "Evaporation", "Condensation"], correct: 1 },
                    { question: "What is the study of fossils called?", options: ["Geology", "Paleontology", "Archaeology", "Biology"], correct: 1 },
                    { question: "What is the basic unit of measurement in the metric system?", options: ["Inch", "Foot", "Meter", "Yard"], correct: 2 },
                    { question: "What is the process by which plants make their own food?", options: ["Respiration", "Photosynthesis", "Digestion", "Circulation"], correct: 1 },
                    { question: "What is the study of matter and energy called?", options: ["Chemistry", "Physics", "Biology", "Geology"], correct: 1 },
                    { question: "What is the force that pulls objects toward Earth?", options: ["Magnetism", "Gravity", "Electricity", "Friction"], correct: 1 },
                    { question: "What is the temperature at which water boils? (Celsius)", options: ["90¬∞C", "100¬∞C", "110¬∞C", "120¬∞C"], correct: 1 },
                    { question: "What is the study of animals called?", options: ["Botany", "Zoology", "Biology", "Ecology"], correct: 1 }
                ]
            },
            reading: {
                "Reading Comprehension": [
                    { question: "What is the main idea of a text?", options: ["The first sentence", "The most important point", "The title", "The last sentence"], correct: 1 },
                    { question: "What do supporting details do?", options: ["Contradict the main idea", "Explain or support the main idea", "Replace the main idea", "Hide the main idea"], correct: 1 },
                    { question: "What is the purpose of reading comprehension?", options: ["To read fast", "To understand what you read", "To memorize words", "To skip pages"], correct: 1 },
                    { question: "What is a summary?", options: ["A long version of the text", "A brief overview of main points", "The title", "The first paragraph"], correct: 1 },
                    { question: "What helps you understand unfamiliar words?", options: ["Skipping them", "Context clues", "Guessing", "Ignoring them"], correct: 1 },
                    { question: "What is inference?", options: ["Reading the words", "Drawing conclusions from clues", "Memorizing facts", "Copying text"], correct: 1 },
                    { question: "What is the sequence of events in a story?", options: ["The characters", "The order things happen", "The setting", "The theme"], correct: 1 },
                    { question: "What is cause and effect?", options: ["Two unrelated events", "An action and its result", "The same thing", "Opposite things"], correct: 1 },
                    { question: "What is comparing and contrasting?", options: ["Finding differences only", "Finding similarities only", "Finding similarities and differences", "Ignoring differences"], correct: 2 },
                    { question: "What is the author's purpose?", options: ["The title", "Why the author wrote the text", "The main character", "The setting"], correct: 1 }
                ],
                "Literary Analysis": [
                    { question: "What is the purpose of literary analysis?", options: ["To summarize the plot", "To examine meaning and techniques", "To memorize quotes", "To count pages"], correct: 1 },
                    { question: "What is a theme in literature?", options: ["The main character", "The setting", "The underlying message", "The plot"], correct: 2 },
                    { question: "What is symbolism in literature?", options: ["Using symbols to represent ideas", "Writing in symbols", "Drawing symbols", "Speaking in symbols"], correct: 0 },
                    { question: "What is the difference between a simile and a metaphor?", options: ["Simile uses 'like' or 'as', metaphor does not", "Metaphor uses 'like' or 'as', simile does not", "They are the same", "Simile is longer than metaphor"], correct: 0 },
                    { question: "What is the point of view when the narrator uses 'I'?", options: ["Third person", "First person", "Second person", "Omniscient"], correct: 1 },
                    { question: "What is an antagonist?", options: ["The main character", "The character who opposes the protagonist", "The narrator", "The setting"], correct: 1 },
                    { question: "What is the purpose of foreshadowing?", options: ["To confuse readers", "To hint at future events", "To summarize the plot", "To introduce characters"], correct: 1 },
                    { question: "What is irony?", options: ["When things are exactly as expected", "When the opposite of what's expected happens", "When things are funny", "When things are sad"], correct: 1 },
                    { question: "What is a protagonist?", options: ["The villain", "The main character", "The narrator", "The setting"], correct: 1 },
                    { question: "What is tone in literature?", options: ["The author's attitude", "The setting", "The plot", "The characters"], correct: 0 }
                ],
                "Vocabulary": [
                    { question: "What does 'enormous' mean?", options: ["Very small", "Very large", "Very fast", "Very slow"], correct: 1 },
                    { question: "What is a synonym for 'happy'?", options: ["Sad", "Angry", "Joyful", "Tired"], correct: 2 },
                    { question: "What is an antonym for 'hot'?", options: ["Warm", "Cold", "Cool", "Tepid"], correct: 1 },
                    { question: "What does 'prevent' mean?", options: ["To allow", "To stop from happening", "To help", "To continue"], correct: 1 },
                    { question: "What is a prefix?", options: ["A word ending", "A word beginning that changes meaning", "The root word", "A complete word"], correct: 1 },
                    { question: "What does 'transparent' mean?", options: ["Opaque", "See-through", "Colorful", "Dark"], correct: 1 },
                    { question: "What is a suffix?", options: ["A word beginning", "A word ending that changes meaning", "The root word", "A complete word"], correct: 1 },
                    { question: "What does 'ancient' mean?", options: ["New", "Very old", "Modern", "Recent"], correct: 1 },
                    { question: "What is the meaning of 'benevolent'?", options: ["Mean", "Kind and generous", "Angry", "Sad"], correct: 1 },
                    { question: "What does 'elaborate' mean?", options: ["Simple", "Detailed and complex", "Short", "Basic"], correct: 1 }
                ],
                "Poetry": [
                    { question: "What is a group of lines in a poem called?", options: ["Paragraph", "Stanza", "Chapter", "Verse"], correct: 1 },
                    { question: "What is rhyme?", options: ["Words that sound different", "Words that end with the same sound", "Words that mean the same", "Words that are opposite"], correct: 1 },
                    { question: "What is rhythm in poetry?", options: ["The pattern of sounds", "The meaning", "The length", "The title"], correct: 0 },
                    { question: "What is alliteration?", options: ["Words that rhyme", "Words starting with the same sound", "Words that mean the same", "Words that are opposite"], correct: 1 },
                    { question: "What is a metaphor in poetry?", options: ["A direct comparison using 'like'", "A direct comparison without 'like'", "A rhyme", "A stanza"], correct: 1 },
                    { question: "What is imagery in poetry?", options: ["Pictures in the book", "Descriptive language that creates pictures", "The title", "The author's name"], correct: 1 },
                    { question: "What is personification?", options: ["Giving human traits to non-human things", "Describing people", "Writing about persons", "Naming characters"], correct: 0 },
                    { question: "What is a haiku?", options: ["A long poem", "A 3-line poem with 5-7-5 syllables", "A rhyming poem", "A story poem"], correct: 1 },
                    { question: "What is onomatopoeia?", options: ["Words that sound like what they mean", "Words that rhyme", "Words that mean the same", "Long words"], correct: 0 },
                    { question: "What is the main message of a poem called?", options: ["The rhyme", "The theme", "The rhythm", "The title"], correct: 1 }
                ],
                "Story Elements": [
                    { question: "What is the climax of a story?", options: ["The beginning", "The turning point or most intense moment", "The end", "The middle"], correct: 1 },
                    { question: "What is the setting of a story?", options: ["The characters", "Where and when the story takes place", "The plot", "The theme"], correct: 1 },
                    { question: "What is the plot of a story?", options: ["The characters", "The sequence of events", "The setting", "The title"], correct: 1 },
                    { question: "What is conflict in a story?", options: ["The characters", "The problem or struggle", "The setting", "The resolution"], correct: 1 },
                    { question: "What is the resolution of a story?", options: ["The problem", "How the conflict is solved", "The beginning", "The characters"], correct: 1 },
                    { question: "What is character development?", options: ["How characters stay the same", "How characters change and grow", "The number of characters", "Character names"], correct: 1 },
                    { question: "What is the exposition of a story?", options: ["The ending", "The introduction of characters and setting", "The conflict", "The climax"], correct: 1 },
                    { question: "What is dialogue?", options: ["Narration", "Conversation between characters", "Description", "Action"], correct: 1 },
                    { question: "What is the rising action?", options: ["The events that build up to the climax", "The ending", "The beginning", "The characters"], correct: 0 },
                    { question: "What is the falling action?", options: ["The events after the climax", "The beginning", "The conflict", "The setting"], correct: 0 }
                ],
                "Critical Thinking": [
                    { question: "What is critical thinking?", options: ["Accepting everything you read", "Analyzing and evaluating information", "Memorizing facts", "Reading quickly"], correct: 1 },
                    { question: "What is bias?", options: ["Fair judgment", "Prejudice or favoritism", "Factual information", "Neutral opinion"], correct: 1 },
                    { question: "What is fact vs. opinion?", options: ["They are the same", "Fact is provable, opinion is a belief", "Opinion is always true", "Fact is always wrong"], correct: 1 },
                    { question: "What is evidence?", options: ["Guesses", "Information that supports a claim", "Opinions", "Feelings"], correct: 1 },
                    { question: "What is a claim?", options: ["Evidence", "A statement that needs support", "A fact", "A question"], correct: 1 },
                    { question: "What is analysis?", options: ["Summarizing", "Breaking down and examining parts", "Reading quickly", "Memorizing"], correct: 1 },
                    { question: "What is evaluation?", options: ["Accepting everything", "Judging the value or quality", "Ignoring information", "Copying text"], correct: 1 },
                    { question: "What is a counterargument?", options: ["The main argument", "An opposing viewpoint", "Evidence", "A conclusion"], correct: 1 },
                    { question: "What is reasoning?", options: ["Guessing", "Using logic to support ideas", "Emotions", "Opinions"], correct: 1 },
                    { question: "What is a conclusion?", options: ["The beginning", "A final decision based on evidence", "A question", "A guess"], correct: 1 }
                ]
            },
            language: {
                "Spanish Basics": [
                    { question: "How do you say 'Hello' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 0 },
                    { question: "How do you say 'Thank you' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 2 },
                    { question: "What is 'Good morning' in Spanish?", options: ["Buenas noches", "Buenos d√≠as", "Buenas tardes", "Hola"], correct: 1 },
                    { question: "How do you say 'Please' in Spanish?", options: ["Por favor", "Gracias", "De nada", "Hasta luego"], correct: 0 },
                    { question: "What is 'Good night' in Spanish?", options: ["Buenos d√≠as", "Buenas tardes", "Buenas noches", "Hola"], correct: 2 },
                    { question: "How do you say 'How are you?' in Spanish?", options: ["¬øC√≥mo est√°s?", "¬øQu√© tal?", "¬øC√≥mo te llamas?", "¬øD√≥nde est√°s?"], correct: 0 },
                    { question: "What is 'You're welcome' in Spanish?", options: ["Por favor", "Gracias", "De nada", "Lo siento"], correct: 2 },
                    { question: "How do you say 'Goodbye' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 1 },
                    { question: "What is 'Yes' in Spanish?", options: ["No", "S√≠", "Tal vez", "Quiz√°s"], correct: 1 },
                    { question: "What is 'No' in Spanish?", options: ["S√≠", "No", "Tal vez", "Quiz√°s"], correct: 1 }
                ],
                "Spanish Conversation": [
                    { question: "How do you say 'My name is...' in Spanish?", options: ["Me llamo...", "Mi nombre es...", "Soy...", "All of the above"], correct: 3 },
                    { question: "What does '¬øCu√°ntos a√±os tienes?' mean?", options: ["How are you?", "How old are you?", "What's your name?", "Where are you from?"], correct: 1 },
                    { question: "How do you say 'I'm fine' in Spanish?", options: ["Estoy bien", "Estoy mal", "Estoy cansado", "Estoy feliz"], correct: 0 },
                    { question: "What does 'Mucho gusto' mean?", options: ["Thank you", "Nice to meet you", "You're welcome", "Goodbye"], correct: 1 },
                    { question: "How do you say 'I don't understand' in Spanish?", options: ["No entiendo", "No s√©", "No puedo", "No quiero"], correct: 0 },
                    { question: "What does '¬øD√≥nde est√°...?' mean?", options: ["How are you?", "Where is...?", "What is...?", "Who is...?"], correct: 1 },
                    { question: "How do you say 'Excuse me' in Spanish?", options: ["Lo siento", "Perd√≥n", "Disculpe", "All of the above"], correct: 3 },
                    { question: "What does 'Por favor' mean?", options: ["Thank you", "Please", "You're welcome", "Goodbye"], correct: 1 },
                    { question: "How do you say 'I'm sorry' in Spanish?", options: ["Lo siento", "Perd√≥n", "Disculpe", "All of the above"], correct: 3 },
                    { question: "What does 'Hasta luego' mean?", options: ["See you later", "Goodbye forever", "Hello", "Thank you"], correct: 0 }
                ],
                "French Basics": [
                    { question: "What does 'Bonjour' mean in French?", options: ["Goodbye", "Hello", "Thank you", "Please"], correct: 1 },
                    { question: "What does 'Merci' mean in French?", options: ["Hello", "Goodbye", "Thank you", "Please"], correct: 2 },
                    { question: "What does 'Au revoir' mean in French?", options: ["Hello", "Goodbye", "Thank you", "Please"], correct: 1 },
                    { question: "What is 'Please' in French?", options: ["Merci", "Bonjour", "S'il vous pla√Æt", "Au revoir"], correct: 2 },
                    { question: "What is 'Good night' in French?", options: ["Bonjour", "Bonsoir", "Bonne nuit", "Au revoir"], correct: 2 },
                    { question: "What is 'Yes' in French?", options: ["Non", "Oui", "Peut-√™tre", "Merci"], correct: 1 },
                    { question: "What is 'No' in French?", options: ["Oui", "Non", "Peut-√™tre", "Merci"], correct: 1 },
                    { question: "What does 'Comment allez-vous?' mean?", options: ["What's your name?", "How are you?", "Where are you?", "How old are you?"], correct: 1 },
                    { question: "What is 'You're welcome' in French?", options: ["Merci", "De rien", "Bonjour", "Au revoir"], correct: 1 },
                    { question: "What does 'Excusez-moi' mean?", options: ["Thank you", "Excuse me", "You're welcome", "Goodbye"], correct: 1 }
                ],
                "French Conversation": [
                    { question: "What does 'Je m'appelle...' mean?", options: ["I am...", "My name is...", "I like...", "I have..."], correct: 1 },
                    { question: "What does 'Comment vous appelez-vous?' mean?", options: ["How are you?", "What's your name?", "Where are you?", "How old are you?"], correct: 1 },
                    { question: "What does 'Je vais bien' mean?", options: ["I'm fine", "I'm not well", "I'm tired", "I'm happy"], correct: 0 },
                    { question: "What does 'Enchant√©(e)' mean?", options: ["Thank you", "Nice to meet you", "You're welcome", "Goodbye"], correct: 1 },
                    { question: "What does 'Je ne comprends pas' mean?", options: ["I don't know", "I don't understand", "I can't", "I don't want"], correct: 1 },
                    { question: "What does 'O√π est...?' mean?", options: ["How is...?", "Where is...?", "What is...?", "Who is...?"], correct: 1 },
                    { question: "What does 'Pardon' mean?", options: ["Thank you", "Excuse me / Sorry", "You're welcome", "Goodbye"], correct: 1 },
                    { question: "What does 'S'il vous pla√Æt' mean?", options: ["Thank you", "Please", "You're welcome", "Goodbye"], correct: 1 },
                    { question: "What does 'Je suis d√©sol√©(e)' mean?", options: ["I'm sorry", "I'm fine", "I'm happy", "I'm tired"], correct: 0 },
                    { question: "What does '√Ä bient√¥t' mean?", options: ["See you soon", "Goodbye forever", "Hello", "Thank you"], correct: 0 }
                ],
                "German Basics": [
                    { question: "What is 'Hello' in German?", options: ["Auf Wiedersehen", "Hallo", "Danke", "Bitte"], correct: 1 },
                    { question: "What is 'Thank you' in German?", options: ["Hallo", "Auf Wiedersehen", "Danke", "Bitte"], correct: 2 },
                    { question: "What is 'Goodbye' in German?", options: ["Hallo", "Auf Wiedersehen", "Danke", "Bitte"], correct: 1 },
                    { question: "What is 'Please' in German?", options: ["Danke", "Hallo", "Bitte", "Auf Wiedersehen"], correct: 2 },
                    { question: "What is 'Good morning' in German?", options: ["Guten Tag", "Guten Morgen", "Gute Nacht", "Auf Wiedersehen"], correct: 1 },
                    { question: "What is 'Yes' in German?", options: ["Nein", "Ja", "Vielleicht", "Danke"], correct: 1 },
                    { question: "What is 'No' in German?", options: ["Ja", "Nein", "Vielleicht", "Danke"], correct: 1 },
                    { question: "What does 'Wie geht es Ihnen?' mean?", options: ["What's your name?", "How are you?", "Where are you?", "How old are you?"], correct: 1 },
                    { question: "What is 'You're welcome' in German?", options: ["Danke", "Bitte", "Hallo", "Auf Wiedersehen"], correct: 1 },
                    { question: "What does 'Entschuldigung' mean?", options: ["Thank you", "Excuse me / Sorry", "You're welcome", "Goodbye"], correct: 1 }
                ],
                "Language Grammar": [
                    { question: "What is a noun?", options: ["An action word", "A person, place, or thing", "A describing word", "A connecting word"], correct: 1 },
                    { question: "What is a verb?", options: ["A person, place, or thing", "An action word", "A describing word", "A connecting word"], correct: 1 },
                    { question: "What is an adjective?", options: ["An action word", "A person, place, or thing", "A describing word", "A connecting word"], correct: 2 },
                    { question: "What is a sentence?", options: ["A group of words", "A complete thought with subject and verb", "A single word", "A paragraph"], correct: 1 },
                    { question: "What is a pronoun?", options: ["A noun", "A word that replaces a noun", "A verb", "An adjective"], correct: 1 },
                    { question: "What is the subject of a sentence?", options: ["The action", "Who or what the sentence is about", "The description", "The ending"], correct: 1 },
                    { question: "What is a preposition?", options: ["A word that shows position or relationship", "An action word", "A describing word", "A noun"], correct: 0 },
                    { question: "What is past tense?", options: ["Something happening now", "Something that already happened", "Something that will happen", "Something that might happen"], correct: 1 },
                    { question: "What is present tense?", options: ["Something happening now", "Something that already happened", "Something that will happen", "Something that might happen"], correct: 0 },
                    { question: "What is future tense?", options: ["Something happening now", "Something that already happened", "Something that will happen", "Something that might happen"], correct: 2 }
                ]
            }
        };

        let currentSubject = null;
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let timerInterval = null;
        let timeRemaining = 900; // 15 minutes in seconds

        function loadSubjects() {
            const selector = document.getElementById('subjectSelector');
            const selectedSubjects = getSelectedSubjects();
            const availableSubjects = subjects.filter(s => selectedSubjects.includes(s.id));
            
            selector.innerHTML = availableSubjects.map(subject => `
                <button class="glass-card p-4 text-center hover:scale-105 transition-transform subject-btn" 
                        data-subject="${subject.id}"
                        style="border: 2px solid ${subject.color}33;">
                    <div class="text-4xl mb-2">${subject.icon}</div>
                    <div class="font-bold">${subject.name}</div>
                </button>
            `).join('');

            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    showQuizSelection(btn.dataset.subject);
                });
            });
        }

        function showQuizSelection(subjectId) {
            const quizzes = subjectQuizzes[subjectId];
            
            if (!quizzes || Object.keys(quizzes).length === 0) {
                alert('No quizzes available for this subject.');
                return;
            }

            currentSubject = subjectId;
            const subject = subjects.find(s => s.id === subjectId);
            
            // Hide subject selector and show quiz selection
            document.getElementById('subjectSelector').parentElement.classList.add('hidden');
            document.getElementById('quizzesContainer').classList.remove('hidden');
            document.getElementById('quizInterface').classList.add('hidden');
            
            document.getElementById('currentSubjectTitle').textContent = `Select a ${subject.name} Quiz`;
            
            const grid = document.getElementById('quizzesGrid');
            const quizTitles = Object.keys(quizzes);
            
            grid.innerHTML = quizTitles.map((quizTitle, index) => {
                const questions = quizzes[quizTitle];
                return `
                    <div class="glass-card p-6 hover:scale-105 transition-transform">
                        <h3 class="text-xl font-bold mb-2">${quizTitle}</h3>
                        <p class="text-sm text-[#F5F7FA]/70 mb-4">10 questions ‚Ä¢ 15 minutes</p>
                        <button class="btn-primary w-full start-quiz-btn" data-quiz="${quizTitle}">
                            Start Quiz
                        </button>
                    </div>
                `;
            }).join('');

            // Add back button
            const backButton = document.createElement('div');
            backButton.className = 'mt-6 text-center';
            backButton.innerHTML = `
                <button class="btn-secondary" id="backToSubjectsBtn">
                    ‚Üê Back to Subjects
                </button>
            `;
            grid.parentElement.appendChild(backButton);

            document.getElementById('backToSubjectsBtn').addEventListener('click', () => {
                document.getElementById('subjectSelector').parentElement.classList.remove('hidden');
                document.getElementById('quizzesContainer').classList.add('hidden');
                const backBtn = document.getElementById('backToSubjectsBtn');
                if (backBtn) backBtn.parentElement.removeChild(backBtn);
            });

            document.querySelectorAll('.start-quiz-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    startQuiz(btn.dataset.quiz);
                });
            });
        }

        function startQuiz(quizTitle) {
            const questions = subjectQuizzes[currentSubject][quizTitle];
            
            if (!questions || questions.length === 0) {
                alert('No questions available for this quiz.');
                return;
            }

            currentQuiz = { subject: currentSubject, quizTitle: quizTitle, questions: questions };
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            timeRemaining = 900; // Reset to 15 minutes

            // Hide quiz selection and show quiz interface
            document.getElementById('quizzesContainer').classList.add('hidden');
            const backBtn = document.getElementById('backToSubjectsBtn');
            if (backBtn) backBtn.parentElement.removeChild(backBtn);
            document.getElementById('quizInterface').classList.remove('hidden');
            
            const subject = subjects.find(s => s.id === currentSubject);
            document.getElementById('quizTitle').textContent = `${subject.name}: ${quizTitle}`;
            document.getElementById('totalQuestions').textContent = questions.length;
            
            // Start timer
            startTimer();
            
            // Show first question
            showQuestion();
        }

        function startTimer() {
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert('Time is up! Your quiz will be automatically submitted.');
                    submitQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timerText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerText').textContent = timerText;
            
            // Change color when time is running low
            const timerDisplay = document.getElementById('timerDisplay');
            // Reset all classes first
            timerDisplay.className = 'px-4 py-2 text-sm font-bold border';
            
            if (timeRemaining <= 60) {
                timerDisplay.classList.add('bg-red-500/20', 'border-red-500', 'text-red-300');
            } else if (timeRemaining <= 300) {
                timerDisplay.classList.add('bg-yellow-500/20', 'border-yellow-500', 'text-yellow-300');
            } else {
                timerDisplay.classList.add('glass-card', 'border-[#4FC3F7]/30');
            }
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const optionsDiv = document.getElementById('answerOptions');
            optionsDiv.innerHTML = question.options.map((option, index) => `
                <label class="flex items-center p-4 glass-card cursor-pointer hover:bg-white/10 transition-all ${userAnswers[currentQuestionIndex] === index ? 'border-2 border-[#4FC3F7]' : ''}">
                    <input type="radio" name="answer" value="${index}" class="mr-3" ${userAnswers[currentQuestionIndex] === index ? 'checked' : ''}>
                    <span>${option}</span>
                </label>
            `).join('');

            document.querySelectorAll('input[name="answer"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    userAnswers[currentQuestionIndex] = parseInt(e.target.value);
                    updateAnswerStyles();
                });
            });

            document.getElementById('prevQuestionBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextQuestionBtn').classList.remove('hidden');
            document.getElementById('submitQuizBtn').classList.add('hidden');
            
            if (currentQuestionIndex === currentQuiz.questions.length - 1) {
                document.getElementById('nextQuestionBtn').classList.add('hidden');
                document.getElementById('submitQuizBtn').classList.remove('hidden');
            }

            const progress = ((currentQuestionIndex + 1) / currentQuiz.questions.length) * 100;
            document.getElementById('quizProgressBar').style.width = progress + '%';
        }

        function updateAnswerStyles() {
            document.querySelectorAll('#answerOptions label').forEach((label, index) => {
                if (userAnswers[currentQuestionIndex] === index) {
                    label.classList.add('border-2', 'border-[#4FC3F7]');
                } else {
                    label.classList.remove('border-2', 'border-[#4FC3F7]');
                }
            });
        }

        document.getElementById('prevQuestionBtn').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        });

        document.getElementById('nextQuestionBtn').addEventListener('click', () => {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        });

        document.getElementById('submitQuizBtn').addEventListener('click', () => {
            submitQuiz();
        });

        document.getElementById('takeAnotherQuizBtn').addEventListener('click', () => {
            // Reset everything
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            currentQuestionIndex = 0;
            userAnswers = [];
            timeRemaining = 900;
            
            // Hide quiz interface and results
            document.getElementById('quizInterface').classList.add('hidden');
            document.getElementById('quizResults').classList.add('hidden');
            
            // Show quiz selection for the same subject
            if (currentSubject) {
                showQuizSelection(currentSubject);
            } else {
                // Fallback to subject selector if no subject selected
                document.getElementById('subjectSelector').parentElement.classList.remove('hidden');
            }
        });

        function submitQuiz() {
            // Stop timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }

            let correct = 0;
            currentQuiz.questions.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    correct++;
                }
            });

            const score = Math.round((correct / currentQuiz.questions.length) * 100);
            
            document.getElementById('quizInterface').classList.add('hidden');
            document.getElementById('quizResults').classList.remove('hidden');
            
            document.getElementById('resultScore').textContent = score + '%';
            document.getElementById('resultMessage').textContent = `You got ${correct} out of ${currentQuiz.questions.length} questions correct!`;
            
            if (score >= 90) {
                document.getElementById('resultIcon').textContent = 'üåü';
                document.getElementById('resultTitle').textContent = 'Excellent Work!';
            } else if (score >= 70) {
                document.getElementById('resultIcon').textContent = 'üëç';
                document.getElementById('resultTitle').textContent = 'Good Job!';
            } else {
                document.getElementById('resultIcon').textContent = 'üìö';
                document.getElementById('resultTitle').textContent = 'Keep Practicing!';
            }
        }
    </script>
</body>
</html>


